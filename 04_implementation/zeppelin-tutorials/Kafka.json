{"paragraphs":[{"text":"%md\nSimple example how to write to Kafka (though most examples usually read a Kafka stream)\n\nMust have Kafka installed\n\n> dcos package install kafka\n\nSpark Interpreter must be configured with depency\n\n> org.apache.kafka:kafka_2.10:jar:0.10.0.0\n\nSee also <https://docs.mesosphere.com/1.7/usage/service-guides/kafka/connecting-clients/>","authenticationInfo":{},"dateUpdated":"Aug 17, 2016 1:30:16 PM","config":{"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471439044698_-233390039","id":"20160816-155117_86083285","result":{"code":"SUCCESS","type":"HTML","msg":"<p>Simple example how to write to Kafka (though most examples usually read a Kafka stream)</p>\n<p>Must have Kafka installed</p>\n<blockquote><p>dcos package install kafka</p>\n</blockquote>\n<p>Spark Interpreter must be configured with depency</p>\n<blockquote><p>org.apache.kafka:kafka_2.10:jar:0.10.0.0</p>\n</blockquote>\n<p>See also <a href=\"https://docs.mesosphere.com/1.7/usage/service-guides/kafka/connecting-clients/\">https://docs.mesosphere.com/1.7/usage/service-guides/kafka/connecting-clients/</a></p>\n"},"dateCreated":"Aug 17, 2016 1:04:04 PM","dateStarted":"Aug 17, 2016 1:30:15 PM","dateFinished":"Aug 17, 2016 1:30:15 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:172","focus":true},{"title":"old way of loading moduls would have been...","text":"%dep\nz.load(\"org.apache.kafka:kafka_2.10:jar:0.10.0.0\");","authenticationInfo":{},"dateUpdated":"Aug 17, 2016 1:16:00 PM","config":{"colWidth":12,"editorMode":"ace/mode/scala","title":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471439044698_-233390039","id":"20160816-155211_1549363636","result":{"code":"SUCCESS","type":"TEXT","msg":"DepInterpreter(%dep) deprecated. Load dependency through GUI interpreter menu instead.\nres0: org.apache.zeppelin.dep.Dependency = org.apache.zeppelin.dep.Dependency@4a83c26d\n"},"dateCreated":"Aug 17, 2016 1:04:04 PM","dateStarted":"Aug 17, 2016 1:16:00 PM","dateFinished":"Aug 17, 2016 1:16:06 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:173"},{"text":"%md\nNeed to configure, so run\n\n> dcos kafka connection\n\nor look up a Kafka broker to bootstrap","authenticationInfo":{},"dateUpdated":"Aug 17, 2016 1:16:00 PM","config":{"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471439044698_-233390039","id":"20160816-155426_1762387832","result":{"code":"SUCCESS","type":"HTML","msg":"<p>Need to configure, so run</p>\n<blockquote><p>dcos kafka connection</p>\n</blockquote>\n<p>or look up a Kafka broker to bootstrap</p>\n"},"dateCreated":"Aug 17, 2016 1:04:04 PM","dateStarted":"Aug 17, 2016 1:16:01 PM","dateFinished":"Aug 17, 2016 1:16:01 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:174"},{"title":"Insert one broker here to bootstrap","text":"import java.util.Properties\nimport org.apache.kafka.clients.producer._\n\nval  producerProps = new Properties()\nproducerProps.put(\"bootstrap.servers\", \"broker-0.kafka.mesos:9432\")\n  \nproducerProps.put(\"key.serializer\", \"org.apache.kafka.common.serialization.StringSerializer\")\nproducerProps.put(\"value.serializer\", \"org.apache.kafka.common.serialization.StringSerializer\")\n\nval producer = new KafkaProducer[String, String](producerProps)","authenticationInfo":{},"dateUpdated":"Aug 17, 2016 1:28:24 PM","config":{"colWidth":12,"editorMode":"ace/mode/scala","title":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471439044698_-233390039","id":"20160816-154046_493045988","result":{"code":"SUCCESS","type":"TEXT","msg":"import java.util.Properties\nimport org.apache.kafka.clients.producer._\nproducerProps: java.util.Properties = {}\nres42: Object = null\nres43: Object = null\nres44: Object = null\nproducer: org.apache.kafka.clients.producer.KafkaProducer[String,String] = org.apache.kafka.clients.producer.KafkaProducer@602f8af5\n"},"dateCreated":"Aug 17, 2016 1:04:04 PM","dateStarted":"Aug 17, 2016 1:28:24 PM","dateFinished":"Aug 17, 2016 1:28:24 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:175","focus":true},{"title":"Send some messages to a topic","text":"val TOPIC=\"test\"\n\nfor(i<- 1 to 50){\n  val record = new ProducerRecord(TOPIC, \"key\", s\"hello $i\")\n  producer.send(record)\n }","authenticationInfo":{},"dateUpdated":"Aug 17, 2016 1:26:51 PM","config":{"colWidth":12,"title":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471439044699_-233774788","id":"20160816-154054_2070356443","result":{"code":"SUCCESS","type":"TEXT","msg":"TOPIC: String = test\n"},"dateCreated":"Aug 17, 2016 1:04:04 PM","dateStarted":"Aug 17, 2016 1:26:51 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:176","dateFinished":"Aug 17, 2016 1:26:51 PM","focus":true},{"title":"Mark the end","text":"val record = new ProducerRecord(TOPIC, \"key\", \"the end \"+new java.util.Date)\n producer.send(record)\n\nproducer.close()","authenticationInfo":{},"dateUpdated":"Aug 17, 2016 1:28:28 PM","config":{"colWidth":12,"title":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471439044699_-233774788","id":"20160816-155750_867190798","result":{"code":"SUCCESS","type":"TEXT","msg":"record: org.apache.kafka.clients.producer.ProducerRecord[String,String] = ProducerRecord(topic=test, partition=null, key=key, value=the end Wed Aug 17 13:28:28 UTC 2016, timestamp=null)\nres46: java.util.concurrent.Future[org.apache.kafka.clients.producer.RecordMetadata] = org.apache.kafka.clients.producer.internals.FutureRecordMetadata@bbb3445\n"},"dateCreated":"Aug 17, 2016 1:04:04 PM","dateStarted":"Aug 17, 2016 1:28:28 PM","dateFinished":"Aug 17, 2016 1:28:29 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:177","focus":true},{"title":"Interact with same topic on shell on DC/OS master node","text":"%md\nTo observe somewhere else, you can actually observe on the shell the topic\n\n> ssh-into-dcos-master.sh\n\n> docker run -it mesosphere/kafka-client\n\n> ./kafka-console-consumer.sh --zookeeper master.mesos:2181/dcos-service-kafka --topic test --from-beginning\n\nAnd you can end with Ctrl-C and post also a new message to the topic\n\n> echo \"Hello from shell\" | ./kafka-console-producer.sh --topic test --broker-list broker-0.kafka.mesos:9216\n","dateUpdated":"Aug 17, 2016 1:29:44 PM","config":{"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"title":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471439044699_-233774788","id":"20160816-155802_1547809896","result":{"code":"SUCCESS","type":"HTML","msg":"<p>To observe somewhere else, you can actually observe on the shell the topic</p>\n<blockquote><p>ssh-into-dcos-master.sh</p>\n<p>docker run -it mesosphere/kafka-client</p>\n<p>./kafka-console-consumer.sh &ndash;zookeeper master.mesos:2181/dcos-service-kafka &ndash;topic test &ndash;from-beginning</p>\n</blockquote>\n<p>And you can end with Ctrl-C and post also a new message to the topic</p>\n<blockquote><p>echo &ldquo;Hello from shell&rdquo; | ./kafka-console-producer.sh &ndash;topic test &ndash;broker-list broker-0.kafka.mesos:9216</p>\n</blockquote>\n"},"dateCreated":"Aug 17, 2016 1:04:04 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:178","dateFinished":"Aug 17, 2016 1:16:01 PM","dateStarted":"Aug 17, 2016 1:16:01 PM"},{"text":"import org.apache.kafka.clients.consumer._\n\nval  consumerProps = new Properties()\nconsumerProps.put(\"bootstrap.servers\", \"broker-0.kafka.mesos:9432\")\n  \nconsumerProps.put(\"key.deserializer\", \"org.apache.kafka.common.serialization.StringDeserializer\")\nconsumerProps.put(\"value.deserializer\", \"org.apache.kafka.common.serialization.StringDeserializer\")\n\nconsumerProps.put(\"value.deserializer\", \"org.apache.kafka.common.serialization.StringDeserializer\")\nconsumerProps.put(\"group.id\", \"test-client-consumer\")\n\n\nval consumer = new KafkaConsumer[String, String](consumerProps)","dateUpdated":"Aug 17, 2016 1:30:56 PM","config":{"colWidth":12,"editorMode":"ace/mode/scala","graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorHide":false},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471439044699_-233774788","id":"20160816-160141_926153039","result":{"code":"SUCCESS","type":"TEXT","msg":"import org.apache.kafka.clients.consumer._\nconsumerProps: java.util.Properties = {}\nres49: Object = null\nres50: Object = null\nres51: Object = null\nres52: Object = org.apache.kafka.common.serialization.StringDeserializer\nres53: Object = null\nconsumer: org.apache.kafka.clients.consumer.KafkaConsumer[String,String] = org.apache.kafka.clients.consumer.KafkaConsumer@3008dae9\n"},"dateCreated":"Aug 17, 2016 1:04:04 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:179","dateFinished":"Aug 17, 2016 1:30:57 PM","dateStarted":"Aug 17, 2016 1:30:56 PM","focus":true},{"title":"Subscribe and read some messages (TODO!)","text":"import java.util.Arrays\n\nconsumer.subscribe(Arrays.asList(TOPIC))\n//consumer.seekToBeginning(TOPIC)","dateUpdated":"Aug 17, 2016 1:31:00 PM","config":{"colWidth":12,"editorMode":"ace/mode/scala","title":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471439044699_-233774788","id":"20160816-161054_1889280533","result":{"code":"SUCCESS","type":"TEXT","msg":"import java.util.Arrays\n"},"dateCreated":"Aug 17, 2016 1:04:04 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:180","dateFinished":"Aug 17, 2016 1:31:00 PM","dateStarted":"Aug 17, 2016 1:31:00 PM","focus":true},{"text":"consumer.poll(10)","dateUpdated":"Aug 17, 2016 1:31:59 PM","config":{"colWidth":12,"editorMode":"ace/mode/scala","graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471439044699_-233774788","id":"20160816-161859_322742675","result":{"code":"SUCCESS","type":"TEXT","msg":"res59: org.apache.kafka.clients.consumer.ConsumerRecords[String,String] = org.apache.kafka.clients.consumer.ConsumerRecords@105a486a\n"},"dateCreated":"Aug 17, 2016 1:04:04 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:181","dateFinished":"Aug 17, 2016 1:31:59 PM","dateStarted":"Aug 17, 2016 1:31:59 PM","focus":true},{"dateUpdated":"Aug 17, 2016 1:16:01 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471439044699_-233774788","id":"20160816-162550_614549602","dateCreated":"Aug 17, 2016 1:04:04 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:182","dateFinished":"Aug 17, 2016 1:16:18 PM","dateStarted":"Aug 17, 2016 1:16:16 PM","result":{"code":"SUCCESS","type":"TEXT","msg":""}}],"name":"Kafka","id":"2BSE8QJQR","angularObjects":{"2BSZCFUX3:shared_process":[],"2BVQGKX9F:shared_process":[],"2BWBJVSSC:shared_process":[],"2BSPTUYCF:shared_process":[],"2BW1K21CG:shared_process":[],"2BSWB7Y1B:shared_process":[],"2BV7GGEQN:shared_process":[],"2BSNJ5VCF:shared_process":[],"2BV44FDAT:shared_process":[],"2BSS49YZU:shared_process":[],"2BVGBT8PJ:shared_process":[],"2BU2GHANB:shared_process":[],"2BUPPHU4J:shared_process":[],"2BTJSDYTY:shared_process":[],"2BSKSQJ4R:shared_process":[],"2BVGEBCTK:shared_process":[],"2BVWCVUCQ:shared_process":[],"2BVME6ZTS:shared_process":[]},"config":{"looknfeel":"default"},"info":{}}