{"paragraphs":[{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471362677053_-607406870","id":"20160816-155117_86083285","dateCreated":"Aug 16, 2016 3:51:17 PM","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:321","text":"%md\nSimple example how to write to Kafka (though most examples usually read a Kafka stream)\n\nMust have Kafka installed\n\n> dcos package install kafka\n\nSpark Interpreter must be configured with depency\n\n> org.apache.kafka:kafka_2.10:jar:0.10.0.0","dateUpdated":"Aug 16, 2016 4:27:33 PM","dateFinished":"Aug 16, 2016 4:27:31 PM","dateStarted":"Aug 16, 2016 4:27:31 PM","result":{"code":"SUCCESS","type":"HTML","msg":"<p>Simple example how to write to Kafka (though most examples usually read a Kafka stream)</p>\n<p>Must have Kafka installed</p>\n<blockquote><p>dcos package install kafka</p>\n</blockquote>\n<p>Spark Interpreter must be configured with depency</p>\n<blockquote><p>org.apache.kafka:kafka_2.10:jar:0.10.0.0</p>\n</blockquote>\n"}},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471362731251_-48843412","id":"20160816-155211_1549363636","dateCreated":"Aug 16, 2016 3:52:11 PM","status":"ERROR","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:385","text":"%dep\nz.load(\"org.apache.kafka:kafka_2.10:jar:0.10.0.0\");","dateUpdated":"Aug 16, 2016 4:07:31 PM","dateFinished":"Aug 16, 2016 4:01:41 PM","dateStarted":"Aug 16, 2016 4:01:41 PM","title":"old way of loading moduls would have been...","result":{"code":"ERROR","type":"TEXT","msg":"Must be used before SparkInterpreter (%spark) initialized\nHint: put this paragraph before any Spark code and restart Zeppelin/Interpreter"}},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471362866063_738938445","id":"20160816-155426_1762387832","dateCreated":"Aug 16, 2016 3:54:26 PM","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:494","text":"%md\nNeed to configure, so run\n\n> dcos kafka connection\n\nor look up a Kafka broker to bootstrap","dateUpdated":"Aug 16, 2016 4:01:41 PM","dateFinished":"Aug 16, 2016 4:01:41 PM","dateStarted":"Aug 16, 2016 4:01:41 PM","result":{"code":"SUCCESS","type":"HTML","msg":"<p>Need to configure, so run</p>\n<blockquote><p>dcos kafka connection</p>\n</blockquote>\n<p>or look up a Kafka broker to bootstrap</p>\n"}},{"text":"import java.util.Properties\nimport org.apache.kafka.clients.producer._\n\nval  props = new Properties()\nprops.put(\"bootstrap.servers\", \"broker-0.kafka.mesos:9216\")\n  \nprops.put(\"key.serializer\", \"org.apache.kafka.common.serialization.StringSerializer\")\nprops.put(\"value.serializer\", \"org.apache.kafka.common.serialization.StringSerializer\")\n\nprops.put(\"key.deserializer\", \"org.apache.kafka.common.serialization.StringDeserializer\")\nprops.put(\"value.deserializer\", \"org.apache.kafka.common.serialization.StringDeserializer\")\n\nval producer = new KafkaProducer[String, String](props)","authenticationInfo":{},"dateUpdated":"Aug 16, 2016 4:20:25 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471362046269_-1761524399","id":"20160816-154046_493045988","result":{"code":"SUCCESS","type":"TEXT","msg":"import java.util.Properties\nimport org.apache.kafka.clients.producer._\nprops: java.util.Properties = {}\nres22: Object = null\nres23: Object = null\nres24: Object = null\nres25: Object = null\nres26: Object = null\nproducer: org.apache.kafka.clients.producer.KafkaProducer[String,String] = org.apache.kafka.clients.producer.KafkaProducer@6a2f3adc\n"},"dateCreated":"Aug 16, 2016 3:40:46 PM","dateStarted":"Aug 16, 2016 4:20:25 PM","dateFinished":"Aug 16, 2016 4:20:26 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:190","title":"Insert one broker here to bootstrap","focus":true},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471362054353_-675362930","id":"20160816-154054_2070356443","dateCreated":"Aug 16, 2016 3:40:54 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:191","dateUpdated":"Aug 16, 2016 4:08:31 PM","dateFinished":"Aug 16, 2016 4:01:43 PM","dateStarted":"Aug 16, 2016 4:01:42 PM","title":"Send some messages to a topic","result":{"code":"SUCCESS","type":"TEXT","msg":"TOPIC: String = test\n"},"text":"val TOPIC=\"test\"\n\nfor(i<- 1 to 50){\n  val record = new ProducerRecord(TOPIC, \"key\", s\"hello $i\")\n  producer.send(record)\n }","focus":true},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471363070574_-399646277","id":"20160816-155750_867190798","dateCreated":"Aug 16, 2016 3:57:50 PM","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:602","dateUpdated":"Aug 16, 2016 4:08:53 PM","dateFinished":"Aug 16, 2016 4:01:43 PM","dateStarted":"Aug 16, 2016 4:01:43 PM","title":"Mark the end","result":{"code":"SUCCESS","type":"TEXT","msg":"record: org.apache.kafka.clients.producer.ProducerRecord[String,String] = ProducerRecord(topic=test, partition=null, key=key, value=the end Tue Aug 16 16:01:43 UTC 2016, timestamp=null)\nres17: java.util.concurrent.Future[org.apache.kafka.clients.producer.RecordMetadata] = org.apache.kafka.clients.producer.internals.FutureRecordMetadata@518bbd83\n"},"text":"val record = new ProducerRecord(TOPIC, \"key\", \"the end \"+new java.util.Date)\n producer.send(record)\n\nproducer.close()"},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","title":true,"editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471363082182_-708184246","id":"20160816-155802_1547809896","dateCreated":"Aug 16, 2016 3:58:02 PM","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:676","dateUpdated":"Aug 16, 2016 4:09:35 PM","dateFinished":"Aug 16, 2016 4:03:38 PM","dateStarted":"Aug 16, 2016 4:03:38 PM","title":"Interact with same topic on shell on DC/OS master node","result":{"code":"SUCCESS","type":"HTML","msg":"<p>To observe somewhere else, you can actually observe on the shell the topic</p>\n<blockquote><p>ssh-into-dcos-master.sh</p>\n<p>docker run -it mesosphere/kafka-client</p>\n<p>./kafka-console-consumer.sh &ndash;zookeeper master.mesos:2181/dcos-service-kafka &ndash;topic test &ndash;from-beginning</p>\n</blockquote>\n<p>And you can end with Ctrl-C and post also a new message to the topic</p>\n<blockquote><p>echo &ldquo;Hello from shell&rdquo; | ./kafka-console-producer.sh &ndash;topic test &ndash;broker-list broker-0.kafka.mesos:9216</p>\n</blockquote>\n"},"text":"%md\nTo observe somewhere else, you can actually observe on the shell the topic\n\n> ssh-into-dcos-master.sh\n\n> docker run -it mesosphere/kafka-client\n\n> ./kafka-console-consumer.sh --zookeeper master.mesos:2181/dcos-service-kafka --topic test --from-beginning\n\nAnd you can end with Ctrl-C and post also a new message to the topic\n\n> echo \"Hello from shell\" | ./kafka-console-producer.sh --topic test --broker-list broker-0.kafka.mesos:9216\n"},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471363301886_672601291","id":"20160816-160141_926153039","dateCreated":"Aug 16, 2016 4:01:41 PM","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:782","dateUpdated":"Aug 16, 2016 4:20:31 PM","dateFinished":"Aug 16, 2016 4:20:32 PM","dateStarted":"Aug 16, 2016 4:20:31 PM","result":{"code":"SUCCESS","type":"TEXT","msg":"import org.apache.kafka.clients.consumer._\nconsumer: org.apache.kafka.clients.consumer.KafkaConsumer[String,String] = org.apache.kafka.clients.consumer.KafkaConsumer@1c6fd78f\n"},"text":"import org.apache.kafka.clients.consumer._\n\nval consumer = new KafkaConsumer[String, String](props)"},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471363854606_1508642038","id":"20160816-161054_1889280533","dateCreated":"Aug 16, 2016 4:10:54 PM","status":"ERROR","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:915","dateUpdated":"Aug 16, 2016 4:27:52 PM","dateFinished":"Aug 16, 2016 4:24:30 PM","dateStarted":"Aug 16, 2016 4:24:29 PM","title":"Subscribe and read some messages (TODO!)","result":{"code":"ERROR","type":"TEXT","msg":"import java.util.Arrays\n<console>:61: error: type mismatch;\n found   : String\n required: java.util.Collection[org.apache.kafka.common.TopicPartition]\n              consumer.seekToBeginning(TOPIC)\n                                       ^\n"},"text":"import java.util.Arrays\n\nconsumer.subscribe(Arrays.asList(TOPIC))\n//consumer.seekToBeginning(TOPIC)"},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471364339763_1496791966","id":"20160816-161859_322742675","dateCreated":"Aug 16, 2016 4:18:59 PM","status":"ERROR","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:998","dateUpdated":"Aug 16, 2016 4:25:50 PM","dateFinished":"Aug 16, 2016 4:25:52 PM","dateStarted":"Aug 16, 2016 4:25:50 PM","result":{"code":"ERROR","type":"TEXT","msg":"org.apache.kafka.common.errors.InvalidGroupIdException: The configured groupId is invalid\n\n"},"text":"consumer.poll(50)"},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1471364750366_356161430","id":"20160816-162550_614549602","dateCreated":"Aug 16, 2016 4:25:50 PM","status":"READY","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:1208"}],"name":"Kafka","id":"2BUHCR2N5","angularObjects":{"2BSB47NXB:shared_process":[],"2BVV5CT6H:shared_process":[],"2BTA7DKSR:shared_process":[],"2BW2FUU8Y:shared_process":[],"2BUFK2M87:shared_process":[],"2BTCV8ZQQ:shared_process":[],"2BUZ5SMY9:shared_process":[],"2BTPU5SZG:shared_process":[],"2BU434XQ2:shared_process":[],"2BSFZ3C49:shared_process":[],"2BVSD37VZ:shared_process":[],"2BW9UA465:shared_process":[],"2BUVAJTAG:shared_process":[],"2BTRMXGD5:shared_process":[],"2BTSSN5PJ:shared_process":[],"2BV6PXCZP:shared_process":[],"2BVPE1ZZN:shared_process":[],"2BUYZ2AXU:shared_process":[]},"config":{"looknfeel":"default"},"info":{}}